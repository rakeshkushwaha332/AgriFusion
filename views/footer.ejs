<!-- views/partials/footer.ejs -->
<footer class="bg-green-900 text-white py-4 px-4 md:px-16 mt-auto">
  <!-- chatbot  -->

  <!-- Chatbot Widget -->
<div id="chatbot" class="fixed bottom-6 right-6 z-50">
  <!-- Chat Toggle Button -->
  <button onclick="toggleChat()" class="bg-green-600 text-white p-3 rounded-full shadow-lg hover:bg-green-700">
    ðŸ’¬
  </button>

  <!-- Chat Window -->
  <div id="chat-window" class="hidden bg-white shadow-xl rounded-xl w-80 h-[500px] p-4 flex flex-col">
    <div class="font-bold text-green-700 mb-3">AgriFusion Bot</div>

    <!-- Chat Messages -->
    <div id="chat-messages" class="flex-1 overflow-y-auto mb-2 text-sm space-y-2 text-gray-800">
      <div class="text-green-700 font-semibold">Bot:</div>
      <div class="bg-green-100 p-2 rounded">Hi ðŸ‘‹! I'm here to help you. Try one of these:</div>
      
      <div class="flex flex-col gap-2 mt-2">
        <button onclick="sendPredefinedQuestion('How can I sell my crops on AgriFusion?')" class="text-left bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded">How can I sell my crops on AgriFusion?</button>
        <button onclick="sendPredefinedQuestion('What kind of crops get the best price?')" class="text-left bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded">What kind of crops get the best price?</button>
        <button onclick="sendPredefinedQuestion('Are there any government subsidies available?')" class="text-left bg-gray-100 hover:bg-gray-200 px-3 py-2 rounded">Are there any government subsidies available?</button>
      </div>
    </div>

    <!-- Chat Input (optional for later expansion) -->
    <div class="pt-2">
      <input id="user-input" class="border border-gray-300 rounded w-full p-2 text-sm" placeholder="Type your question..." />
    </div>
  </div>
</div>

<script>
  function toggleChat() {
    document.getElementById('chat-window').classList.toggle('hidden');
  }

  function appendMessage(role, message) {
    const msgContainer = document.getElementById('chat-messages');
    const el = document.createElement('div');
    el.className = (role === 'Bot' ? 'bg-green-100' : 'bg-gray-100') + ' p-2 rounded';
    el.innerHTML = `<strong>${role}:</strong> ${message}`;
    msgContainer.appendChild(el);
    msgContainer.scrollTop = msgContainer.scrollHeight;
  }

  function sendPredefinedQuestion(question) {
    appendMessage('You', question);

    // Basic mock answers â€“ replace with fetch(`/chat`) to make dynamic
    let answer = '';
    if (question.includes('sell')) {
      answer = 'To sell crops, go to your dashboard, click "Add Product", and fill in the details.';
    } else if (question.includes('best price')) {
      answer = 'High-demand crops like tomatoes, wheat, and rice usually get better prices.';
    } else if (question.includes('subsidies')) {
      answer = 'Yes, the government offers subsidies. Please visit the PM-Kisan or Agri Subsidy section for more info.';
    } else {
      answer = 'Sorry, Iâ€™m not sure about that. Please try again!';
    }

    setTimeout(() => {
      appendMessage('Bot', answer);
    }, 600);
  }
</script>

    <div class="flex flex-col md:flex-row justify-around text-center text-sm md:text-base mb-6">
      <a href="/about" class="hover:text-yellow-300 mb-2 md:mb-0">ABOUT US</a>
      <a href="/products" class="hover:text-yellow-300 mb-2 md:mb-0">PRODUCTS</a>
      <a href="/help" class="hover:text-yellow-300 mb-2 md:mb-0">HELP</a>
      <a href="/chat" class="hover:text-yellow-300">CONTACT</a>
    </div>
  
    <div class="border-t border-green-700 my-4"></div>
  
    <p class="text-center text-sm max-w-xl mx-auto text-green-200 px-2 mb-4">
      AgriFusion is committed to revolutionizing agriculture through innovation, technology, and farmer empowerment.
    </p>
  
    <div class="flex justify-center space-x-4 text-lg mb-4">
      <a href="https://facebook.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-facebook-f"></i></a>
      <a href="https://twitter.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-twitter"></i></a>
      <a href="https://google.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-google"></i></a>
      <a href="https://instagram.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-instagram"></i></a>
      <a href="https://linkedin.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-linkedin-in"></i></a>
      <a href="https://github.com" target="_blank" class="hover:text-yellow-300"><i class="fab fa-github"></i></a>
    </div>
  
    <p class="text-center text-xs text-green-300">
      &copy; <%= new Date().getFullYear() %> AgriFusion. All rights reserved.
    </p>
  </footer>